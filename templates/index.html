{% extends "base.html" %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è - Crypto Tracker{% endblock %}

{% block content %}
<div class="row">
    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å —Ç–µ–∫—É—â–∏–º–∏ —Ü–µ–Ω–∞–º–∏ -->
    <div class="col-md-6">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="card-title mb-0">üìà –¢–µ–∫—É—â–∏–µ —Ü–µ–Ω—ã –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç</h5>
            </div>
            <div class="card-body">
                {% if latest_prices %}
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>–ú–æ–Ω–µ—Ç–∞</th>
                                <th>–¶–µ–Ω–∞ (USD)</th>
                                <th>–ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞</th>
                                <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for row in latest_prices %}
                            <tr>
                                <td><strong>{{ row['coin_symbol'] }}</strong></td>
                                <td class="monospace"><strong>${{ "{:,.2f}".format(row['price_usd']) }}</strong></td>
                                <td class="small">{{ row['timestamp'] }}</td>
                                <td>
                                    <a href="/chart/{{ row['coin_symbol'] }}" 
                                       class="btn btn-sm btn-outline-primary" 
                                       target="_blank">
                                        üìä –ì—Ä–∞—Ñ–∏–∫
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="alert alert-warning">
                    –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –µ—â—ë –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç—Ä–µ–∫–µ—Ä –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö.
                </div>
                {% endif %}
            </div>
        </div>
        
        <!-- –§–æ—Ä–º–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–æ–Ω–µ—Ç—ã (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è) -->
        <div class="card mt-4">
            <div class="card-header bg-success text-white">
                <h5 class="card-title mb-0">‚ûï –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–µ—Ç—É –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è</h5>
            </div>
            <div class="card-body">
                <form action="/add_coin" method="POST">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="coin_name" class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: Bitcoin)</label>
                            <input type="text" class="form-control" id="coin_name" name="coin_name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="coin_symbol" class="form-label">–°–∏–º–≤–æ–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä: BTC)</label>
                            <input type="text" class="form-control" id="coin_symbol" name="coin_symbol" required>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-success mt-3">–î–æ–±–∞–≤–∏—Ç—å –≤ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ</button>
                </form>
                <p class="text-muted small mt-2">
                    <em>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —ç—Ç–∞ —Ñ–æ—Ä–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è. –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∞–≤–∫–∞ config.py</em>
                </p>
            </div>
        </div>
    </div>
    
    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –∏—Å—Ç–æ—Ä–∏–µ–π -->
    <div class="col-md-6">
        <div class="card">
            <div class="card-header bg-info text-white">
                <h5 class="card-title mb-0">üìã –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫</h5>
            </div>
            <div class="card-body">
                {% if history %}
                <div class="table-responsive">
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>–í—Ä–µ–º—è</th>
                                <th>–ú–æ–Ω–µ—Ç–∞</th>
                                <th>–¶–µ–Ω–∞ (USD)</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for row in history %}
                            <tr>
                                <td class="small">{{ row['timestamp'] }}</td>
                                <td><span class="badge bg-secondary">{{ row['coin_symbol'] }}</span></td>
                                <td class="monospace">${{ "{:,.2f}".format(row['price_usd']) }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="text-center mt-2">
                    <a href="#" class="btn btn-sm btn-outline-info">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é</a>
                </div>
                {% else %}
                <div class="alert alert-warning">
                    –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø—É—Å—Ç–∞.
                </div>
                {% endif %}
            </div>
        </div>
        
        <!-- –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã -->
        <div class="card mt-4">
            <div class="card-header bg-secondary text-white">
                <h5 class="card-title mb-0">‚öôÔ∏è –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h5>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item d-flex justify-content-between">
                        <span>–¢—Ä–µ–∫–µ—Ä (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç):</span>
                        <span class="badge bg-success">–†–∞–±–æ—Ç–∞–µ—Ç</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between">
                        <span>–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:</span>
                        <span class="badge bg-success">–ê–∫—Ç–∏–≤–Ω–∞</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between">
                        <span>Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:</span>
                        <span class="badge bg-success">–í–∫–ª—é—á–µ–Ω—ã</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between">
                        <span>–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—ç—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞):</span>
                        <span class="badge bg-primary">–ó–∞–ø—É—â–µ–Ω</span>
                    </li>
                </ul>
                <div class="mt-3">
                    <h6>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:</h6>
                    <div class="btn-group" role="group">
                        <a href="/api/prices" class="btn btn-outline-secondary btn-sm" target="_blank">JSON API</a>
                        <a href="#" class="btn btn-outline-secondary btn-sm">–û–±–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é</a>
                        <a href="#" class="btn btn-outline-secondary btn-sm">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (CSV)</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
